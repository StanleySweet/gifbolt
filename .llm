---
model:claude-haiku-4.5
---
# GifBolt Standards

MANDATORY code standards for GifBolt. All violations=ERRORS; zero warnings policy enforced via .editorconfig, analyzers.

## C# (MANDATORY)

**Naming(ERROR):** Types/Interfaces=PascalCase(I prefix for interfaces); Public=PascalCase; Private=_camelCase; Locals/Params=camelCase
Ex: `GifBoltControl:Control{private IntPtr _nativeHandle; public string Source{get;set;} public bool LoadGif(string path){var result=false; return result;}}` `IGifDecoder{void Decode();}`

**this(ERROR):** MUST use explicit `this.` for fields/properties/methods/events. ✓:`if(this._isLoaded)return; this.Source="x"; this.Method();` ✗:`if(_isLoaded)` or `Source=` or `Method()`

**sealed(ERROR):** Classes=sealed unless designed for inheritance. ✓:`public abstract class Base{abstract void Play();} public sealed class Impl:Control{}` ✗:`public class Impl:Control{}`

**Docs(MANDATORY):** ALL public classes/interfaces/methods/properties/fields require XML docs w/ `<summary>`,`<remarks>`,`<param>`,`<returns>`,`<exception>`. Format: `///<summary>Brief desc</summary>///<remarks>Context</remarks>///<param name="x">Desc</param>///<returns>Result</returns>///<exception cref="T">When</exception>`. Private: brief comments explaining purpose.

**Braces:** Allman style(new line); braces for all blocks(even single-line). Ex: `class X{\n public bool M(){\n if(x){\n return false;\n }\n return true;\n }\n}`

**Order:** Using→Namespace→Class+docs→Constants/statics→Fields(priv,pub)→Props(priv,pub)→Ctors→Public methods→Private methods→Nested types

**Misc:** Line<120chars; 4spaces; ArgumentNullException for nulls; Async suffix; IEnumerable<T> over List<T> in APIs; $"interpolation" over Format()

**Config:** .editorconfig=source of truth(severity: error=build fail; warning=warn; suggestion=hint; silent=none). Static analysis via Roslyn; formatting via EditorConfig+pre-commit; docs analyzed.

---

## C++ (MANDATORY)

**ZERO WARNINGS POLICY**: All compiler/static analysis warnings=ERRORS; must resolve before commit.

**Format:** .clang-format w/ Google style(Allman braces); 4spaces; line<100chars; space before parens in control statements
Ex: `class GifDecoder{\npublic:\n bool Decode(const std::string& path){\n if(path.empty()){\n return false;\n }\n return true;\n }\nprivate:\n std::vector<Frame> _frames;\n size_t _currentFrame;\n};`

**Naming:** Classes/Structs=PascalCase; Functions=camelCase; Members=_camelCase(underscore prefix); Constants=UPPER_SNAKE_CASE; Locals=camelCase; Macros=UPPER_SNAKE_CASE
Ex: `class GifRenderer{private: ID3D11Device* _device; static const size_t MAX_FRAMES=1024; public: void renderFrame(size_t frameIndex){}};`

**Docs:** All public classes/functions require C++ style docs: `///\brief Desc.\n///\param x Param desc.\n///\return Return desc.\n///\throws Exception When.` `///\class Name\n///\brief Brief.\n///\details Details.`

**Static Analysis:** Must pass .clang-tidy w/ NO WARNINGS. Memory safety; RAII; no unnecessary copies; use refs; C++17 features; clear names; no magic numbers.

**Compiler:** MUST compile w/ `-Wall -Wextra -Wpedantic -Werror` and ZERO warnings. No unused vars; no signed/unsigned mismatch; no shadowed vars; braces for all; explicit casts.

**Memory:** Use smart ptrs(`std::unique_ptr`,`std::shared_ptr`) for dynamic alloc; RAII for resources; avoid raw ptrs in APIs; doc ownership semantics.
✓:`std::unique_ptr<GifDecoder> CreateDecoder(){return std::make_unique<GifDecoder>();}` ✗:`GifDecoder* CreateDecoder(){return new GifDecoder();}`

---

## Project Management (MANDATORY)

**.csproj Optimization:** SDK-style format:`<Project Sdk="Microsoft.NET.Sdk">`; remove unnecessary props/items; rely on SDK defaults; only explicit PackageReference/ProjectReference when needed; no redundant file listings(SDK globs); no auto-gen metadata comments.
Optimal: `<Project Sdk="Microsoft.NET.Sdk"><PropertyGroup><TargetFramework>net6.0</TargetFramework><Nullable>enable</Nullable></PropertyGroup><ItemGroup><PackageReference Include="Avalonia" Version="11.0.0"/></ItemGroup><ItemGroup><ProjectReference Include="..\GifBolt.Core\GifBolt.Core.csproj"/></ItemGroup></Project>`
Avoid: OutputType/RootNamespace/AssemblyName props(SDK infers); explicit Compile items(SDK includes all .cs automatically)

**Repo Structure:** DO NOT create temp/versioned folder names. NO: `_new`,`_old`,`_backup`,`_temp`,date suffixes. Repo=Git; modify in-place; use branches for experiments; use Git history for old versions; move/rename w/ Git commands.
✗:`docs/`,`docs_new/`,`src_backup/` ✓:`docs/`,`src/`(modify in-place; use Git branches)
If restructure needed: `git checkout -b refactor/name`; make changes in orig folders; commit w/ clear msgs; merge when ready.

---

## For LLM Agents

**C# Review:** (1)Always apply rules-non-negotiable; (2)Check .editorconfig first; (3)Add Doxygen comments to all public APIs immediately; (4)Use explicit `this` for all member access; (5)Mark classes `sealed` unless inheritance needed; (6)Follow Allman brace style; (7)PascalCase for public,camelCase for params/locals; (8)_camelCase for private fields; (9)Keep .csproj minimal; (10)Never create "_new" or temp folder structures. Flag violations as errors. NO warnings acceptable.

**C++ Review:** (1)Always apply rules-non-negotiable; (2)Check .clang-format/.clang-tidy first; (3)Add docs to all public APIs; (4)Use smart pointers-never raw ptrs in new APIs; (5)Follow naming conventions-PascalCase classes,camelCase functions; (6)_camelCase for members; (7)Write code passing `-Wall -Wextra -Wpedantic -Werror`. Flag ALL warnings as errors. Zero tolerance.

---

## Project Structure

```
src/
├── GifBolt.Core/          # Cross-platform core(netstandard2.0)
│   └── GifPlayer.cs       # Core player facade
├── GifBolt.Wpf/           # WPF platform wrapper
│   └── GifBoltControl.cs  # WPF control
└── GifBolt.Native/        # C++ DirectX renderer
    ├── CMakeLists.txt
    ├── include/
    └── src/
```

---

## Related Files

`.editorconfig`=C# style rules; `.clang-format`=C++ formatting; `.clang-tidy`=C++ static analysis; `CMakeLists.txt`=build config; `.pre-commit-config.yaml`=pre-commit validation

Apply include-what-you-use; don't commit commented code-fix if possible; copyright headers important; WPF/Avalonia=same feature set; bundle as NuGet; C++ code=clang-tidy compliant
