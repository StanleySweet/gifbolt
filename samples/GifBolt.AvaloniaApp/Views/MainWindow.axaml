<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:GifBolt.AvaloniaApp.ViewModels"
        xmlns:gif="using:GifBolt.Avalonia"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
        x:Class="GifBolt.AvaloniaApp.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
    Title="GifBolt Avalonia Sample - macOS Metal Backend">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Grid RowDefinitions="Auto,*,Auto" Margin="20">
        <!-- Header -->
        <StackPanel Grid.Row="0" Spacing="10" Margin="0,0,0,20">
            <TextBlock Text="GifBolt - Avalonia Sample" FontSize="24" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock Text="Cross-platform GIF rendering with Metal (macOS), D3D11 (Windows)"
                       HorizontalAlignment="Center" Foreground="Gray"/>
        </StackPanel>

        <!-- Main Content -->
        <TabControl Grid.Row="1">
            <!-- Custom Control Tab -->
            <TabItem Header="Custom Control">
                <StackPanel Spacing="15" Margin="20">
                    <TextBlock Text="GifBoltControl Example" FontSize="16" FontWeight="Bold"/>
                    <TextBlock Text="Using the direct GifBoltControl API" Foreground="Gray"/>

                    <Border BorderBrush="Gray" BorderThickness="1" Width="450" Height="350"
                            HorizontalAlignment="Left">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                                <GradientStop Color="#FFE3F2FD" Offset="0"/>
                                <GradientStop Color="#FF90CAF9" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <gif:GifBoltControl x:Name="gifControl"
                                          Source="/Users/stan/Dev/GifBolt/VUE_CAISSE_EXPRESS 897x504_01.gif"
                                          AutoStart="True"
                                          Loop="True"
                                          Stretch="Uniform"
                                          ScalingFilter="Lanczos"/>
                    </Border>

                    <StackPanel Orientation="Horizontal" Spacing="10" Margin="0,10,0,0">
                        <TextBlock Text="Scaling Filter:" VerticalAlignment="Center" FontWeight="SemiBold"/>
                        <ComboBox x:Name="filterComboBox" SelectedIndex="3" Width="120"
                                  SelectionChanged="OnFilterChanged">
                            <ComboBoxItem Content="Nearest"/>
                            <ComboBoxItem Content="Bilinear"/>
                            <ComboBoxItem Content="Bicubic"/>
                            <ComboBoxItem Content="Lanczos"/>
                        </ComboBox>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <Button Content="Play" Click="OnPlayClick" Width="80"/>
                        <Button Content="Pause" Click="OnPauseClick" Width="80"/>
                        <Button Content="Stop" Click="OnStopClick" Width="80"/>
                        <Button Content="Load..." Click="OnLoadClick" Width="80"/>
                    </StackPanel>
                </StackPanel>
            </TabItem>

            <!-- Attached Properties Tab -->
            <TabItem Header="Attached Properties">
                <StackPanel Spacing="15" Margin="20">
                    <TextBlock Text="ImageBehavior Example (WpfAnimatedGif Compatible)"
                               FontSize="16" FontWeight="Bold"/>
                    <TextBlock Text="Using attached properties on standard Image controls"
                               Foreground="Gray"/>

                    <TextBlock Text="✅ Live Demo: Image control with gif:ImageBehavior.AnimatedSource"
                               FontWeight="SemiBold" Margin="0,10,0,5"/>

                    <Border BorderBrush="Gray" BorderThickness="1" Width="450" Height="350"
                            HorizontalAlignment="Left" Background="#22000000">
                           <Image gif:ImageBehavior.AnimatedSource="/Users/stan/Dev/GifBolt/VUE_CAISSE_EXPRESS 897x504_01.gif"
                               gif:ImageBehavior.AutoStart="True"
                               gif:ImageBehavior.RepeatBehavior="Forever"
                               Stretch="Uniform"/>
                    </Border>

                    <TextBlock TextWrapping="Wrap" Foreground="Gray" Margin="0,10,0,0">
                        The above Image uses attached properties for WpfAnimatedGif compatibility.
                        Drop in any standard Avalonia Image control!
                    </TextBlock>

                    <Border BorderBrush="Green" BorderThickness="2" CornerRadius="5"
                            Padding="15" Margin="0,10,0,0" Background="#22008000">
                        <StackPanel Spacing="5">
                            <TextBlock Text="✨ Now Available!" FontWeight="Bold" Foreground="LightGreen"/>
                            <TextBlock TextWrapping="Wrap" Foreground="#DDFFFFFF">
                                ImageBehavior attached properties are now fully functional:
                            </TextBlock>
                            <TextBlock FontFamily="Consolas,Courier New" Foreground="#DDFFFFFF" Margin="10,5,0,0">
                                &lt;Image gif:ImageBehavior.AnimatedSource="file.gif"
                            </TextBlock>
                            <TextBlock FontFamily="Consolas,Courier New" Foreground="#DDFFFFFF" Margin="10,0,0,0">
                                       gif:ImageBehavior.RepeatBehavior="Forever"
                            </TextBlock>
                            <TextBlock FontFamily="Consolas,Courier New" Foreground="#DDFFFFFF" Margin="10,0,0,0">
                                       gif:ImageBehavior.AutoStart="True"/&gt;
                            </TextBlock>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </TabItem>

            <!-- Info Tab -->
            <TabItem Header="System Info">
                <StackPanel Spacing="15" Margin="20">
                    <!-- Backend Information -->
                    <StackPanel Spacing="10">
                        <TextBlock Text="Backend Information" FontSize="16" FontWeight="Bold"/>
                        <TextBlock x:Name="backendInfo" Text="Backend: Loading..." Margin="0,10,0,0"/>
                        <TextBlock Text="Platform: macOS" />
                        <TextBlock Text="Renderer: Metal (Apple GPU)" />
                        <TextBlock Text="Framework: Avalonia 11.3.11" />
                        <TextBlock Text="Target: .NET 6.0" />
                    </StackPanel>

                    <!-- Version Information -->
                    <Separator Margin="0,10"/>
                    <StackPanel Spacing="10">
                        <TextBlock Text="Native Library Version" FontSize="16" FontWeight="Bold"/>
                        <TextBlock x:Name="versionInfo" Text="Loading version..." Margin="0,10,0,0"/>
                        <TextBlock x:Name="versionDetails" Text="" TextWrapping="Wrap" Foreground="Gray"/>
                    </StackPanel>
                </StackPanel>
            </TabItem>
        </TabControl>

        <!-- Status Bar -->
        <Border Grid.Row="2" BorderBrush="Gray" BorderThickness="0,1,0,0" Padding="10" Margin="0,20,0,0">
            <TextBlock x:Name="statusText" Text="Ready" Foreground="Gray"/>
        </Border>
    </Grid>

</Window>
