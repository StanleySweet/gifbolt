<!-- SPDX-License-Identifier: MIT -->
<Window x:Class="GifBolt.SampleApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:gifbolt="clr-namespace:GifBolt.Wpf;assembly=GifBolt.Wpf"
        Title="GifBolt WPF Sample - DirectX 11 Backend" Height="700" Width="850">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="GifBolt - WPF Sample" FontSize="24" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock Text="Cross-platform GIF rendering with DirectX 11 (Windows)"
                       HorizontalAlignment="Center" Foreground="Gray" Margin="0,5,0,0"/>
        </StackPanel>

        <!-- Main Content -->
        <TabControl Grid.Row="1">
            <!-- Attached Properties with ScalingFilter Tab -->
            <TabItem Header="Scaling Filters">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <TextBlock Text="AnimationBehavior with ScalingFilter" FontSize="16" FontWeight="Bold"/>
                        <TextBlock Text="Using attached properties on Image control with configurable scaling"
                                   Foreground="Gray" Margin="0,5,0,15"/>

                        <Border BorderBrush="Gray" BorderThickness="1"
                                HorizontalAlignment="Left" Margin="0,0,0,15">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#FFE3F2FD" Offset="0"/>
                                    <GradientStop Color="#FF90CAF9" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Grid>
                                <Image x:Name="GifImageScaling"
                                       gifbolt:AnimationBehavior.RepeatBehavior="Forever"
                                       gifbolt:AnimationBehavior.ScalingFilter="None"
                                       gifbolt:AnimationBehavior.RenderMode="D3DImage"
                                       Stretch="Uniform"/>
                                <!-- FPS Overlay -->
                                <Border Background="#CC000000" CornerRadius="5" Padding="8,4"
                                        HorizontalAlignment="Right" VerticalAlignment="Top" Margin="10">
                                    <TextBlock x:Name="FpsDisplay" Text="FPS: --"
                                              Foreground="#00FF00" FontFamily="Consolas,Courier New" FontSize="14"/>
                                </Border>
                            </Grid>
                        </Border>

                        <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                            <TextBlock Text="Scaling Filter:" VerticalAlignment="Center" FontWeight="SemiBold" Margin="0,0,10,0"/>
                            <ComboBox x:Name="FilterComboBox" SelectedIndex="0" Width="120" SelectionChanged="OnFilterChanged">
                                <ComboBoxItem Content="None (Native)"/>
                                <ComboBoxItem Content="Nearest"/>
                                <ComboBoxItem Content="Bilinear"/>
                                <ComboBoxItem Content="Bicubic"/>
                                <ComboBoxItem Content="Lanczos"/>
                            </ComboBox>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                            <Button Content="Load..." Click="OnLoadGif" Width="80"/>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Info Tab -->
            <TabItem Header="System Info">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <!-- Backend Information -->
                        <TextBlock Text="Backend Information" FontSize="16" FontWeight="Bold"/>
                        <StackPanel Margin="0,10,0,0">
                            <TextBlock x:Name="BackendInfo" Text="Backend: DirectX 11" Margin="0,0,0,5"/>
                            <TextBlock Text="Platform: Windows" Margin="0,0,0,5"/>
                            <TextBlock Text="Renderer: Direct3D 11 (GPU-accelerated)" Margin="0,0,0,5"/>
                            <TextBlock Text="Framework: WPF (.NET Framework 4.7.2)" Margin="0,0,0,5"/>
                        </StackPanel>

                        <!-- Version Information -->
                        <Separator Margin="0,15,0,15"/>
                        <TextBlock Text="Native Library Version" FontSize="16" FontWeight="Bold"/>
                        <StackPanel Margin="0,10,0,0">
                            <TextBlock x:Name="VersionInfo" Text="Loading version..." Margin="0,0,0,5"/>
                            <TextBlock x:Name="VersionDetails" Text="" TextWrapping="Wrap" Foreground="Gray"/>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- Status Bar -->
        <Border Grid.Row="2" BorderBrush="Gray" BorderThickness="0,1,0,0" Padding="10" Margin="0,20,0,0">
            <TextBlock x:Name="StatusText" Text="Ready" Foreground="Gray"/>
        </Border>
    </Grid>
</Window>
